# Sidebarzz Chrome Extension

A Chrome extension for managing workspaces, bookmarks, and tabs. The **primary UI** is the **injected sidebar** (content script) that appears on web pages; the Chrome native side panel is secondary.

## Contents

- [Project Structure](#project-structure) · [Setup](#setup) · [Features](#features) · [Usage](#usage) · [Development](#development) · [Technical Details](#technical-details) · [Notes](#notes) · [Privacy](#privacy) · [Known issues](#known-issues)

## Project Structure

- **`dist/`** – Runtime output. Contains:
  - **Built from `src/`**: `background.js`, `sidepanel.js`, `index.css`, `sidepanel.html` (generated by build).
  - **Edited directly in dist** (no separate source): `content.js`, `sidebar.css` (injected sidebar), `newtab.html`/`newtab.js`, `popup.html`/`popup.js`, `options.html`/`options.js`/`options.css`.
- **`src/`** – TypeScript and CSS that the build compiles/copies into `dist/`:
  - `background.ts`, `sidepanel.ts`, `storage.ts`, `icons.ts`, `index.css`
- **`build.js`** – Build script: compiles background + sidepanel, copies CSS, writes `sidepanel.html`.

## Setup

1. Install dependencies:
   ```bash
   pnpm install
   ```

2. Build (produces/updates `dist/background.js`, `dist/sidepanel.js`, `dist/index.css`, `dist/sidepanel.html`):
   ```bash
   pnpm run build
   ```

3. Watch mode (rebuilds on changes to `src/*.ts`):
   ```bash
   pnpm run build:watch
   ```

4. Load the extension in Chrome:
   - Open `chrome://extensions/`
   - Enable "Developer mode"
   - Click "Load unpacked"
   - Select the project root (the folder containing `manifest.json`)

## Features

### ✅ Workspace Storage
- **Per-workspace bookmarks**: Each workspace maintains its own set of customizable bookmarks
- **Tab tracking**: Open tabs are remembered per workspace
- **Tab restoration**: When browser closes, tabs are saved and can be restored per workspace
- **Workspace-specific settings**: All configurations are stored per workspace

### ✅ Panel Customization
- **Appearance settings**:
  - Rounded corners toggle
  - Customizable margins (from side, top, bottom)
  - Adjustable panel width (200-600px)
  
- **Drag-and-drop**: Bookmarks can be reordered by dragging them into place

- **Panel modes**:
  - **Fixed mode**: Standard fixed side panel, full height
  - **Hovering mode**: Floating panel with customizable margins and shadows

### ✅ Collapsible Sidepanel
- Panel can be collapsed to a narrow strip
- Collapsibility can be toggled on/off in settings
- Collapse button in the top-left corner

### ✅ Workspace Configuration
- **On-close behavior**:
  - Continue where left off: Restores tabs from last session
  - Open default tabs: Opens predefined URLs on startup
  
- **Default tabs**: Configure URLs that should open when using "default" on-close behavior

### ✅ Workspace Management
- Create, rename, and delete workspaces
- Switch between workspaces
- Each workspace maintains independent state

## Usage

### Creating a Workspace
1. Click the "+" button in the Workspaces section
2. Enter a name for your workspace
3. The new workspace becomes active

### Adding Bookmarks
1. Click the "+" button in the Bookmarks section
2. Enter the URL and optional title
3. Bookmarks are saved to the current workspace

### Reordering Bookmarks
1. Click and drag any bookmark
2. Drop it in the desired position
3. The new order is automatically saved

### Customizing the Panel
1. Click the settings button (⚙️) in the top-right
2. Adjust appearance, behavior, and on-close settings
3. Click "Save Settings" to apply changes

### Collapsing the Panel
1. Click the collapse button (◀) in the top-left
2. Click again (▶) to expand

## Development

- **TypeScript**: Strict mode enabled
- **Build Tool**: esbuild for fast compilation with bundling
- **Target**: Chrome/Chromium with Manifest V3
- **Storage**: Uses Chrome's `chrome.storage.local` API

## Technical Details

### Storage Structure
Workspace data is stored in `chrome.storage.local` with the following structure:
```typescript
{
  workspaceData: {
    workspaces: Workspace[],
    currentWorkspaceId: string
  }
}
```

Each workspace contains:
- Bookmarks (with drag-and-drop positions)
- Open tabs (current session)
- Closed tabs (remembered from last session)
- Settings (appearance, behavior, on-close config)

### Permissions
- `tabs`: Track and manage tabs per workspace
- `bookmarks`: Access browser bookmarks (for future integration)
- `storage`: Save workspace data
- `sidePanel`: Display side panel
- `history`: Access browsing history (for workspace-specific history)

## Notes

- Workspace data persists across browser sessions
- Tab restoration happens automatically based on workspace settings
- All customizations are workspace-specific
- The extension uses Chrome's side panel API (Manifest V3)

## Privacy

**Sidebarzz does not collect, send, or sell your personal data.** All data stays on your device in Chrome’s local storage.

- **Stored on your device only:** Workspace names/IDs, per-workspace bookmarks (URLs, titles), tab URLs and titles per workspace (for restoration), and settings (width, margins, mode, etc.). Nothing is sent to our servers or any third party.
- **Not collected:** No personally identifiable information, health, financial, or authentication data; no location or IP; no full browsing history (only tabs in your workspaces); no page content; no keystroke or click logging beyond what’s needed to run the extension.
- **Permissions** (tabs, storage, bookmarks, scripting, host access, sidePanel, history, favicon) are used only to provide workspace management, sidebar display, and tab restoration. None are used to send data off your device or to track you.

**Chrome Web Store:** Use this README as your privacy policy URL. If the repo is on GitHub, use your repo URL with `#privacy` (e.g. `https://github.com/yourusername/chrome-sidepanel#privacy`).

## Known issues

- **Multi-window workspace switch:** When multiple browser windows are open, switching workspaces in one window can sometimes clear that workspace’s tabs.