{
  "version": 3,
  "sources": ["../src/storage.ts", "../src/icons.ts", "../src/sidepanel.ts"],
  "sourcesContent": ["// Storage service for workspace-specific data\r\n// Handles per-workspace bookmarks, tabs, settings, and history\r\n\r\nexport interface Bookmark {\r\n  id: string;\r\n  title: string;\r\n  url: string;\r\n  favicon?: string;\r\n  position?: number; // For drag-and-drop ordering (legacy)\r\n  // Snap-to-grid layout (Phase 3 will use this)\r\n  gridRow?: number;\r\n  gridCol?: number;\r\n}\r\n\r\nexport interface HistoryEntry {\r\n  id: string;\r\n  url: string;\r\n  title?: string;\r\n  favicon?: string;\r\n  visitedAt: number;\r\n  tabId?: number;\r\n}\r\n\r\nexport interface Credential {\r\n  id: string;\r\n  url: string;\r\n  username: string;\r\n  password: string;\r\n  note?: string;\r\n  createdAt: number;\r\n  updatedAt: number;\r\n  lastUsedAt?: number;\r\n}\r\n\r\n/** Minimal tab info we persist; full Tab objects don't serialize reliably to chrome.storage */\r\nexport interface ClosedTabInfo {\r\n  url: string;\r\n  title?: string;\r\n}\r\n\r\nexport interface Workspace {\r\n  id: string;\r\n  name: string;\r\n  icon?: string; // Icon URL or preset identifier\r\n  active: boolean;\r\n  bookmarks: Bookmark[];\r\n  openTabs: chrome.tabs.Tab[];\r\n  closedTabs: ClosedTabInfo[]; // Remembered tabs when browser closes (plain objects for reliable storage)\r\n  activeTabUrl?: string; // URL of the last focused tab in this workspace (for restore)\r\n  settings: WorkspaceSettings;\r\n   // Per-workspace browsing history (tracked while this workspace is active)\r\n  history?: HistoryEntry[];\r\n  // Per-workspace stored credentials (Phase 5 will use this)\r\n  credentials?: Credential[];\r\n  createdAt: number;\r\n  updatedAt: number;\r\n}\r\n\r\nexport interface WorkspaceSettings {\r\n  // Panel appearance\r\n  roundedCorners: boolean;\r\n  marginFromSide: number; // pixels\r\n  marginTop: number; // pixels\r\n  marginBottom: number; // pixels\r\n  width: number; // pixels (40-80px for sidebar)\r\n  borderRadius: number; // pixels for panel border radius\r\n  iconBorderRadius: number; // pixels for icon border radius\r\n  position: 'left' | 'right'; // sidebar position\r\n  alignment: 'top' | 'bottom'; // bookmark alignment\r\n  \r\n  // Theme/Colors\r\n  backgroundColor: string; // panel background color\r\n  iconBackgroundColor: string; // icon background color\r\n  iconTextColor: string; // icon text color\r\n  borderColor: string; // border color\r\n  accentColor: string; // accent color for highlights, hover states, etc.\r\n  themeId?: string; // ID of selected theme (if using a theme)\r\n  customThemes?: CustomTheme[]; // User-defined custom themes\r\n  iconPackId?: string; // ID of selected icon pack\r\n  \r\n  // Panel behavior\r\n  mode: 'fixed' | 'hovering';\r\n  collapsible: boolean;\r\n  collapsed: boolean;\r\n\r\n  // On-close behavior\r\n  onCloseBehavior: 'continue' | 'default'; // continue where left off or open default tabs\r\n  defaultTabs: string[]; // URLs to open on startup if onCloseBehavior is 'default'\r\n}\r\n\r\nexport interface CustomTheme {\r\n  id: string;\r\n  name: string;\r\n  backgroundColor: string;\r\n  iconBackgroundColor: string;\r\n  iconTextColor: string;\r\n  borderColor: string;\r\n  accentColor: string;\r\n}\r\n\r\nexport interface WorkspaceData {\r\n  workspaces: Workspace[];\r\n  currentWorkspaceId: string;\r\n}\r\n\r\nconst DEFAULT_SETTINGS: WorkspaceSettings = {\r\n  roundedCorners: true,\r\n  marginFromSide: 0,\r\n  marginTop: 0,\r\n  marginBottom: 0,\r\n  width: 52, // Default sidebar width (40-80px range)\r\n  borderRadius: 0, // Default panel border radius\r\n  iconBorderRadius: 25, // Default icon border radius (max)\r\n  position: 'left',\r\n  alignment: 'top',\r\n  backgroundColor: '#252526',\r\n  iconBackgroundColor: '#2d2d2d',\r\n  iconTextColor: '#d4d4d4',\r\n  borderColor: '#3e3e42',\r\n  accentColor: '#007acc',\r\n  mode: 'fixed',\r\n  collapsible: false,\r\n  collapsed: false,\r\n  onCloseBehavior: 'continue',\r\n  defaultTabs: [],\r\n  iconPackId: 'minimalist' // Default to minimalist icon pack\r\n};\r\n\r\nexport class StorageService {\r\n  private static readonly STORAGE_KEY = 'workspaceData';\r\n\r\n  // Get all workspace data\r\n  static async getWorkspaceData(): Promise<WorkspaceData> {\r\n    const result = await chrome.storage.local.get(this.STORAGE_KEY);\r\n    if (!result[this.STORAGE_KEY]) {\r\n      // Initialize with default workspace\r\n      const defaultData: WorkspaceData = {\r\n        workspaces: [{\r\n          id: 'default',\r\n          name: 'Default',\r\n          active: true,\r\n          bookmarks: [],\r\n          openTabs: [],\r\n          closedTabs: [],\r\n          settings: { ...DEFAULT_SETTINGS },\r\n          createdAt: Date.now(),\r\n          updatedAt: Date.now()\r\n        }],\r\n        currentWorkspaceId: 'default'\r\n      };\r\n      await this.saveWorkspaceData(defaultData);\r\n      return defaultData;\r\n    }\r\n    return result[this.STORAGE_KEY] as WorkspaceData;\r\n  }\r\n\r\n  // Save all workspace data\r\n  static async saveWorkspaceData(data: WorkspaceData): Promise<void> {\r\n    await chrome.storage.local.set({ [this.STORAGE_KEY]: data });\r\n  }\r\n\r\n  // Get current workspace\r\n  static async getCurrentWorkspace(): Promise<Workspace> {\r\n    const data = await this.getWorkspaceData();\r\n    const workspace = data.workspaces.find(w => w.id === data.currentWorkspaceId);\r\n    if (!workspace) {\r\n      throw new Error('Current workspace not found');\r\n    }\r\n    return workspace;\r\n  }\r\n\r\n  // Set current workspace\r\n  static async setCurrentWorkspace(workspaceId: string): Promise<void> {\r\n    const data = await this.getWorkspaceData();\r\n    data.workspaces.forEach(w => w.active = w.id === workspaceId);\r\n    data.currentWorkspaceId = workspaceId;\r\n    await this.saveWorkspaceData(data);\r\n  }\r\n\r\n  // Create new workspace\r\n  static async createWorkspace(name: string): Promise<Workspace> {\r\n    const data = await this.getWorkspaceData();\r\n    const newWorkspace: Workspace = {\r\n      id: `workspace-${Date.now()}`,\r\n      name,\r\n      active: false,\r\n      bookmarks: [],\r\n      openTabs: [],\r\n      closedTabs: [],\r\n      settings: { ...DEFAULT_SETTINGS },\r\n      createdAt: Date.now(),\r\n      updatedAt: Date.now()\r\n    };\r\n    data.workspaces.push(newWorkspace);\r\n    await this.saveWorkspaceData(data);\r\n    return newWorkspace;\r\n  }\r\n\r\n  // Update workspace\r\n  static async updateWorkspace(workspaceId: string, updates: Partial<Workspace>): Promise<void> {\r\n    const data = await this.getWorkspaceData();\r\n    const index = data.workspaces.findIndex(w => w.id === workspaceId);\r\n    if (index === -1) throw new Error('Workspace not found');\r\n    \r\n    data.workspaces[index] = {\r\n      ...data.workspaces[index],\r\n      ...updates,\r\n      updatedAt: Date.now()\r\n    };\r\n    await this.saveWorkspaceData(data);\r\n  }\r\n\r\n  // Delete workspace\r\n  static async deleteWorkspace(workspaceId: string): Promise<void> {\r\n    const data = await this.getWorkspaceData();\r\n    if (data.workspaces.length === 1) {\r\n      throw new Error('Cannot delete the last workspace');\r\n    }\r\n    data.workspaces = data.workspaces.filter(w => w.id !== workspaceId);\r\n    if (data.currentWorkspaceId === workspaceId) {\r\n      data.currentWorkspaceId = data.workspaces[0].id;\r\n      data.workspaces[0].active = true;\r\n    }\r\n    await this.saveWorkspaceData(data);\r\n  }\r\n\r\n  // Add bookmark to workspace\r\n  static async addBookmark(workspaceId: string, bookmark: Bookmark): Promise<void> {\r\n    const workspace = (await this.getWorkspaceData()).workspaces.find(w => w.id === workspaceId);\r\n    if (!workspace) throw new Error('Workspace not found');\r\n    \r\n    workspace.bookmarks.push(bookmark);\r\n    await this.updateWorkspace(workspaceId, { bookmarks: workspace.bookmarks });\r\n  }\r\n\r\n  // Update bookmark\r\n  static async updateBookmark(workspaceId: string, bookmarkId: string, updates: Partial<Bookmark>): Promise<void> {\r\n    const workspace = (await this.getWorkspaceData()).workspaces.find(w => w.id === workspaceId);\r\n    if (!workspace) throw new Error('Workspace not found');\r\n    \r\n    const index = workspace.bookmarks.findIndex(b => b.id === bookmarkId);\r\n    if (index === -1) throw new Error('Bookmark not found');\r\n    \r\n    workspace.bookmarks[index] = { ...workspace.bookmarks[index], ...updates };\r\n    await this.updateWorkspace(workspaceId, { bookmarks: workspace.bookmarks });\r\n  }\r\n\r\n  // Delete bookmark\r\n  static async deleteBookmark(workspaceId: string, bookmarkId: string): Promise<void> {\r\n    const workspace = (await this.getWorkspaceData()).workspaces.find(w => w.id === workspaceId);\r\n    if (!workspace) throw new Error('Workspace not found');\r\n    \r\n    workspace.bookmarks = workspace.bookmarks.filter(b => b.id !== bookmarkId);\r\n    await this.updateWorkspace(workspaceId, { bookmarks: workspace.bookmarks });\r\n  }\r\n\r\n  // Reorder bookmarks (for drag-and-drop)\r\n  static async reorderBookmarks(workspaceId: string, bookmarkIds: string[]): Promise<void> {\r\n    const workspace = (await this.getWorkspaceData()).workspaces.find(w => w.id === workspaceId);\r\n    if (!workspace) throw new Error('Workspace not found');\r\n    \r\n    const bookmarkMap = new Map(workspace.bookmarks.map(b => [b.id, b]));\r\n    workspace.bookmarks = bookmarkIds.map((id, index) => ({\r\n      ...bookmarkMap.get(id)!,\r\n      position: index\r\n    }));\r\n    await this.updateWorkspace(workspaceId, { bookmarks: workspace.bookmarks });\r\n  }\r\n\r\n  // Save closed tabs (for remembering on browser close) and which tab was focused.\r\n  // Store only { url, title } so chrome.storage serialization is reliable (full Tab objects can lose .url).\r\n  static async saveClosedTabs(workspaceId: string, tabs: chrome.tabs.Tab[]): Promise<void> {\r\n    const activeTab = tabs.find(t => t.active);\r\n    const activeTabUrl = activeTab?.url && !activeTab.url.startsWith('chrome://') && !activeTab.url.startsWith('chrome-extension://')\r\n      ? activeTab.url\r\n      : undefined;\r\n    const closedTabs: ClosedTabInfo[] = tabs\r\n      .filter(t => t.url && !t.url.startsWith('chrome://') && !t.url.startsWith('chrome-extension://'))\r\n      .map(t => ({ url: t.url!, title: t.title }));\r\n    await this.updateWorkspace(workspaceId, { closedTabs, activeTabUrl: activeTabUrl ?? undefined });\r\n  }\r\n\r\n  // Update workspace settings\r\n  static async updateWorkspaceSettings(workspaceId: string, settings: Partial<WorkspaceSettings>): Promise<void> {\r\n    const workspace = (await this.getWorkspaceData()).workspaces.find(w => w.id === workspaceId);\r\n    if (!workspace) throw new Error('Workspace not found');\r\n    \r\n    workspace.settings = { ...workspace.settings, ...settings };\r\n    await this.updateWorkspace(workspaceId, { settings: workspace.settings });\r\n  }\r\n}\r\n", "// Icon pack system for black & white simplistic icons\r\n\r\nexport interface IconPack {\r\n  id: string;\r\n  name: string;\r\n  icons: {\r\n    [key: string]: string; // SVG content\r\n  };\r\n}\r\n\r\n// Black & White Minimalist Icon Pack\r\nexport const MINIMALIST_ICON_PACK: IconPack = {\r\n  id: 'minimalist',\r\n  name: 'Minimalist',\r\n  icons: {\r\n    // Settings gear icon\r\n    settings: `<svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n      <path d=\"M8 10.5C9.38071 10.5 10.5 9.38071 10.5 8C10.5 6.61929 9.38071 5.5 8 5.5C6.61929 5.5 5.5 6.61929 5.5 8C5.5 9.38071 6.61929 10.5 8 10.5Z\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n      <path d=\"M11.5 8.5L12.5 9.5L14.5 7.5\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n      <path d=\"M8 2.5L9.5 4.5L8 6.5L6.5 4.5L8 2.5Z\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n      <path d=\"M2.5 8L4.5 6.5L6.5 8L4.5 9.5L2.5 8Z\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n      <path d=\"M8 9.5L6.5 11.5L8 13.5L9.5 11.5L8 9.5Z\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n      <path d=\"M13.5 8L11.5 9.5L9.5 8L11.5 6.5L13.5 8Z\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n    </svg>`,\r\n    \r\n    // Collapse left arrow\r\n    collapseLeft: `<svg width=\"12\" height=\"12\" viewBox=\"0 0 12 12\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n      <path d=\"M7.5 9L4.5 6L7.5 3\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n    </svg>`,\r\n    \r\n    // Expand right arrow\r\n    expandRight: `<svg width=\"12\" height=\"12\" viewBox=\"0 0 12 12\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n      <path d=\"M4.5 9L7.5 6L4.5 3\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n    </svg>`,\r\n    \r\n    // Menu dots (vertical)\r\n    menu: `<svg width=\"12\" height=\"12\" viewBox=\"0 0 12 12\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n      <circle cx=\"6\" cy=\"2\" r=\"1\" fill=\"currentColor\"/>\r\n      <circle cx=\"6\" cy=\"6\" r=\"1\" fill=\"currentColor\"/>\r\n      <circle cx=\"6\" cy=\"10\" r=\"1\" fill=\"currentColor\"/>\r\n    </svg>`,\r\n    \r\n    // Link/bookmark icon\r\n    link: `<svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n      <path d=\"M6.5 9.5L9.5 6.5\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n      <path d=\"M7.5 6.5H9.5V8.5\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n      <path d=\"M11.5 4.5C12.0523 5.05228 12.0523 5.94772 11.5 6.5L9.5 8.5\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n      <path d=\"M4.5 11.5C3.94772 10.9477 3.94772 10.0523 4.5 9.5L6.5 7.5\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n      <path d=\"M6.5 7.5H4.5V9.5\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n    </svg>`,\r\n    \r\n    // Add/plus icon\r\n    add: `<svg width=\"14\" height=\"14\" viewBox=\"0 0 14 14\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n      <path d=\"M7 2V12M2 7H12\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\"/>\r\n    </svg>`,\r\n    \r\n    // Delete/close icon\r\n    delete: `<svg width=\"14\" height=\"14\" viewBox=\"0 0 14 14\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n      <path d=\"M3.5 3.5L10.5 10.5M10.5 3.5L3.5 10.5\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\"/>\r\n    </svg>`,\r\n    \r\n    // Close/X icon\r\n    close: `<svg width=\"14\" height=\"14\" viewBox=\"0 0 14 14\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n      <path d=\"M3.5 3.5L10.5 10.5M10.5 3.5L3.5 10.5\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\"/>\r\n    </svg>`,\r\n  }\r\n};\r\n\r\n// Simple Line Icon Pack (even more minimal)\r\nexport const SIMPLE_LINE_ICON_PACK: IconPack = {\r\n  id: 'simple-line',\r\n  name: 'Simple Line',\r\n  icons: {\r\n    settings: `<svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n      <circle cx=\"8\" cy=\"8\" r=\"2.5\" stroke=\"currentColor\" stroke-width=\"1.2\"/>\r\n      <path d=\"M8 1V3M8 13V15M15 8H13M3 8H1M13.5 2.5L12 4M4 12L2.5 13.5M13.5 13.5L12 12M4 4L2.5 2.5\" stroke=\"currentColor\" stroke-width=\"1.2\" stroke-linecap=\"round\"/>\r\n    </svg>`,\r\n    \r\n    collapseLeft: `<svg width=\"12\" height=\"12\" viewBox=\"0 0 12 12\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n      <path d=\"M8 3L4 6L8 9\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n    </svg>`,\r\n    \r\n    expandRight: `<svg width=\"12\" height=\"12\" viewBox=\"0 0 12 12\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n      <path d=\"M4 3L8 6L4 9\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n    </svg>`,\r\n    \r\n    menu: `<svg width=\"12\" height=\"12\" viewBox=\"0 0 12 12\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n      <path d=\"M6 2V2M6 6V6M6 10V10\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\"/>\r\n      <circle cx=\"6\" cy=\"2\" r=\"0.8\" fill=\"currentColor\"/>\r\n      <circle cx=\"6\" cy=\"6\" r=\"0.8\" fill=\"currentColor\"/>\r\n      <circle cx=\"6\" cy=\"10\" r=\"0.8\" fill=\"currentColor\"/>\r\n    </svg>`,\r\n    \r\n    link: `<svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n      <path d=\"M7 5H5C3.89543 5 3 5.89543 3 7V11C3 12.1046 3.89543 13 5 13H9C10.1046 13 11 12.1046 11 11V9\" stroke=\"currentColor\" stroke-width=\"1.2\" stroke-linecap=\"round\"/>\r\n      <path d=\"M9 11H11C12.1046 11 13 10.1046 13 9V5C13 3.89543 12.1046 3 11 3H7C5.89543 3 5 3.89543 5 5V7\" stroke=\"currentColor\" stroke-width=\"1.2\" stroke-linecap=\"round\"/>\r\n    </svg>`,\r\n    \r\n    add: `<svg width=\"14\" height=\"14\" viewBox=\"0 0 14 14\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n      <path d=\"M7 1V13M1 7H13\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\"/>\r\n    </svg>`,\r\n    \r\n    delete: `<svg width=\"14\" height=\"14\" viewBox=\"0 0 14 14\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n      <path d=\"M3.5 3.5L10.5 10.5M10.5 3.5L3.5 10.5\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\"/>\r\n    </svg>`,\r\n    \r\n    close: `<svg width=\"14\" height=\"14\" viewBox=\"0 0 14 14\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n      <path d=\"M3.5 3.5L10.5 10.5M10.5 3.5L3.5 10.5\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\"/>\r\n    </svg>`,\r\n  }\r\n};\r\n\r\n// Ultra Minimal Icon Pack (just lines, no fills)\r\nexport const ULTRA_MINIMAL_ICON_PACK: IconPack = {\r\n  id: 'ultra-minimal',\r\n  name: 'Ultra Minimal',\r\n  icons: {\r\n    settings: `<svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n      <circle cx=\"8\" cy=\"8\" r=\"2\" stroke=\"currentColor\" stroke-width=\"1\"/>\r\n      <path d=\"M8 0.5V3M8 13V15.5M15.5 8H13M3 8H0.5M14 2L12.5 3.5M3.5 12.5L2 14M14 14L12.5 12.5M3.5 3.5L2 2\" stroke=\"currentColor\" stroke-width=\"1\" stroke-linecap=\"round\"/>\r\n    </svg>`,\r\n    \r\n    collapseLeft: `<svg width=\"12\" height=\"12\" viewBox=\"0 0 12 12\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n      <path d=\"M7.5 2L2.5 6L7.5 10\" stroke=\"currentColor\" stroke-width=\"1.2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n    </svg>`,\r\n    \r\n    expandRight: `<svg width=\"12\" height=\"12\" viewBox=\"0 0 12 12\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n      <path d=\"M4.5 2L9.5 6L4.5 10\" stroke=\"currentColor\" stroke-width=\"1.2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n    </svg>`,\r\n    \r\n    menu: `<svg width=\"12\" height=\"12\" viewBox=\"0 0 12 12\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n      <line x1=\"6\" y1=\"1.5\" x2=\"6\" y2=\"3.5\" stroke=\"currentColor\" stroke-width=\"1.2\" stroke-linecap=\"round\"/>\r\n      <line x1=\"6\" y1=\"5.5\" x2=\"6\" y2=\"7.5\" stroke=\"currentColor\" stroke-width=\"1.2\" stroke-linecap=\"round\"/>\r\n      <line x1=\"6\" y1=\"9.5\" x2=\"6\" y2=\"11.5\" stroke=\"currentColor\" stroke-width=\"1.2\" stroke-linecap=\"round\"/>\r\n    </svg>`,\r\n    \r\n    link: `<svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n      <path d=\"M6.5 6.5L9.5 9.5\" stroke=\"currentColor\" stroke-width=\"1\" stroke-linecap=\"round\"/>\r\n      <path d=\"M9.5 6.5H11.5C12.6046 6.5 13.5 7.39543 13.5 8.5V11.5C13.5 12.6046 12.6046 13.5 11.5 13.5H8.5C7.39543 13.5 6.5 12.6046 6.5 11.5V9.5\" stroke=\"currentColor\" stroke-width=\"1\" stroke-linecap=\"round\"/>\r\n      <path d=\"M9.5 9.5H7.5C6.39543 9.5 5.5 8.60457 5.5 7.5V4.5C5.5 3.39543 6.39543 2.5 7.5 2.5H10.5C11.6046 2.5 12.5 3.39543 12.5 4.5V6.5\" stroke=\"currentColor\" stroke-width=\"1\" stroke-linecap=\"round\"/>\r\n    </svg>`,\r\n    \r\n    add: `<svg width=\"14\" height=\"14\" viewBox=\"0 0 14 14\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n      <line x1=\"7\" y1=\"1\" x2=\"7\" y2=\"13\" stroke=\"currentColor\" stroke-width=\"1.2\" stroke-linecap=\"round\"/>\r\n      <line x1=\"1\" y1=\"7\" x2=\"13\" y2=\"7\" stroke=\"currentColor\" stroke-width=\"1.2\" stroke-linecap=\"round\"/>\r\n    </svg>`,\r\n    \r\n    delete: `<svg width=\"14\" height=\"14\" viewBox=\"0 0 14 14\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n      <line x1=\"3.5\" y1=\"3.5\" x2=\"10.5\" y2=\"10.5\" stroke=\"currentColor\" stroke-width=\"1.2\" stroke-linecap=\"round\"/>\r\n      <line x1=\"10.5\" y1=\"3.5\" x2=\"3.5\" y2=\"10.5\" stroke=\"currentColor\" stroke-width=\"1.2\" stroke-linecap=\"round\"/>\r\n    </svg>`,\r\n    \r\n    close: `<svg width=\"14\" height=\"14\" viewBox=\"0 0 14 14\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n      <line x1=\"3.5\" y1=\"3.5\" x2=\"10.5\" y2=\"10.5\" stroke=\"currentColor\" stroke-width=\"1.2\" stroke-linecap=\"round\"/>\r\n      <line x1=\"10.5\" y1=\"3.5\" x2=\"3.5\" y2=\"10.5\" stroke=\"currentColor\" stroke-width=\"1.2\" stroke-linecap=\"round\"/>\r\n    </svg>`,\r\n  }\r\n};\r\n\r\nexport const ICON_PACKS: IconPack[] = [\r\n  MINIMALIST_ICON_PACK,\r\n  SIMPLE_LINE_ICON_PACK,\r\n  ULTRA_MINIMAL_ICON_PACK\r\n];\r\n\r\nexport function getIconPack(id: string): IconPack {\r\n  return ICON_PACKS.find(pack => pack.id === id) || MINIMALIST_ICON_PACK;\r\n}\r\n\r\nexport function getIcon(iconPack: IconPack, iconName: string): string {\r\n  return iconPack.icons[iconName] || iconPack.icons.link || '';\r\n}\r\n", "// Side Panel UI Controller\r\n// Manages bookmarks display, workspace switching, and customization\r\n\r\nimport { StorageService, Bookmark, Workspace, WorkspaceSettings } from './storage';\r\nimport { getIconPack, getIcon, ICON_PACKS } from './icons';\r\n\r\nclass SidePanelManager {\r\n  private currentWorkspace: Workspace | null = null;\r\n  private isDragging: boolean = false;\r\n  private draggedElement: HTMLElement | null = null;\r\n  private dragOverElement: HTMLElement | null = null;\r\n\r\n  constructor() {\r\n    this.initializeUI();\r\n    this.loadWorkspaceData();\r\n  }\r\n\r\n  private async initializeUI(): Promise<void> {\r\n    console.log('Initializing side panel UI');\r\n    const sidepanelContainer = document.getElementById('sidepanel');\r\n    if (!sidepanelContainer) return;\r\n\r\n    // Create settings button\r\n    const settingsBtn = document.createElement('button');\r\n    settingsBtn.id = 'settings-btn';\r\n    settingsBtn.className = 'settings-btn icon-btn';\r\n    settingsBtn.title = 'Settings';\r\n    settingsBtn.addEventListener('click', () => this.openSettings());\r\n    sidepanelContainer.appendChild(settingsBtn);\r\n\r\n    // Create collapse button\r\n    const collapseBtn = document.createElement('button');\r\n    collapseBtn.id = 'collapse-btn';\r\n    collapseBtn.className = 'collapse-btn icon-btn';\r\n    collapseBtn.title = 'Collapse';\r\n    collapseBtn.addEventListener('click', () => this.toggleCollapse());\r\n    sidepanelContainer.appendChild(collapseBtn);\r\n\r\n    // Create workspace switcher\r\n    const workspaceSwitcher = document.createElement('div');\r\n    workspaceSwitcher.id = 'workspace-switcher';\r\n    workspaceSwitcher.className = 'workspace-switcher';\r\n    sidepanelContainer.appendChild(workspaceSwitcher);\r\n\r\n    // Create bookmarks container\r\n    const bookmarksContainer = document.createElement('div');\r\n    bookmarksContainer.id = 'bookmarks-container';\r\n    bookmarksContainer.className = 'bookmarks-container';\r\n    sidepanelContainer.appendChild(bookmarksContainer);\r\n\r\n    // Create settings panel (hidden by default)\r\n    const settingsPanel = document.createElement('div');\r\n    settingsPanel.id = 'settings-panel';\r\n    settingsPanel.className = 'settings-panel hidden';\r\n    sidepanelContainer.appendChild(settingsPanel);\r\n\r\n    // Apply initial styles\r\n    this.applyWorkspaceStyles();\r\n  }\r\n\r\n  private async loadWorkspaceData(): Promise<void> {\r\n    try {\r\n      this.currentWorkspace = await StorageService.getCurrentWorkspace();\r\n      this.renderUI();\r\n      this.applyWorkspaceStyles();\r\n    } catch (error) {\r\n      console.error('Error loading workspace data:', error);\r\n    }\r\n  }\r\n\r\n  private async renderUI(): Promise<void> {\r\n    if (!this.currentWorkspace) return;\r\n    \r\n    await this.renderWorkspaceSwitcher();\r\n    await this.renderBookmarks();\r\n    this.updateCollapseButton();\r\n    this.updateIcons();\r\n  }\r\n\r\n  private updateIcons(): void {\r\n    if (!this.currentWorkspace) return;\r\n    \r\n    const iconPackId = this.currentWorkspace.settings.iconPackId || 'minimalist';\r\n    const iconPack = getIconPack(iconPackId);\r\n    \r\n    // Update settings button\r\n    const settingsBtn = document.getElementById('settings-btn');\r\n    if (settingsBtn) {\r\n      settingsBtn.innerHTML = getIcon(iconPack, 'settings');\r\n    }\r\n    \r\n    // Update collapse button\r\n    const collapseBtn = document.getElementById('collapse-btn');\r\n    if (collapseBtn) {\r\n      const iconName = this.currentWorkspace.settings.collapsed ? 'expandRight' : 'collapseLeft';\r\n      collapseBtn.innerHTML = getIcon(iconPack, iconName);\r\n    }\r\n  }\r\n\r\n  private async renderWorkspaceSwitcher(): Promise<void> {\r\n    const switcher = document.getElementById('workspace-switcher');\r\n    if (!switcher) return;\r\n\r\n    const data = await StorageService.getWorkspaceData();\r\n    const workspaces = data.workspaces;\r\n    \r\n    // Use current workspace's icon pack, or default\r\n    const currentWorkspace = workspaces.find(w => w.active) || workspaces[0];\r\n    const iconPackId = currentWorkspace?.settings?.iconPackId || 'minimalist';\r\n    const iconPack = getIconPack(iconPackId);\r\n\r\n    switcher.innerHTML = `\r\n      <div class=\"workspace-header\">\r\n        <h3>Workspaces</h3>\r\n        <button id=\"add-workspace-btn\" class=\"icon-btn\" title=\"Add new workspace\">${getIcon(iconPack, 'add')}</button>\r\n      </div>\r\n      <div class=\"workspace-list\">\r\n        ${workspaces\r\n          .map(\r\n            (ws) => {\r\n              const wsIconPackId = ws.settings?.iconPackId || iconPackId;\r\n              const wsIconPack = getIconPack(wsIconPackId);\r\n              return `\r\n          <div class=\"workspace-item ${ws.active ? 'active' : ''}\" data-workspace-id=\"${ws.id}\">\r\n            <span class=\"workspace-name\">${ws.name}</span>\r\n            <button class=\"workspace-menu-btn icon-btn\" data-workspace-id=\"${ws.id}\">${getIcon(wsIconPack, 'menu')}</button>\r\n          </div>\r\n        `;\r\n            }\r\n          )\r\n          .join('')}\r\n      </div>\r\n    `;\r\n\r\n    this.attachWorkspaceListeners();\r\n  }\r\n\r\n  private async renderBookmarks(): Promise<void> {\r\n    const container = document.getElementById('bookmarks-container');\r\n    if (!container || !this.currentWorkspace) return;\r\n\r\n    // Sort bookmarks by position if available\r\n    const sortedBookmarks = [...this.currentWorkspace.bookmarks].sort((a, b) => {\r\n      const posA = a.position ?? 0;\r\n      const posB = b.position ?? 0;\r\n      return posA - posB;\r\n    });\r\n\r\n    const iconPackId = this.currentWorkspace.settings.iconPackId || 'minimalist';\r\n    const iconPack = getIconPack(iconPackId);\r\n\r\n    container.innerHTML = `\r\n      <div class=\"bookmarks-header\">\r\n        <h3>Bookmarks</h3>\r\n        <button id=\"add-bookmark-btn\" class=\"icon-btn\" title=\"Add new bookmark\">${getIcon(iconPack, 'add')}</button>\r\n      </div>\r\n      <div class=\"bookmarks-list\" id=\"bookmarks-list\">\r\n        ${sortedBookmarks.length === 0\r\n          ? '<div class=\"empty-state\">No bookmarks yet. Click + to add one.</div>'\r\n          : sortedBookmarks\r\n              .map(\r\n                (bookmark) => {\r\n                  // Use favicon if available, otherwise use icon pack link icon\r\n                  const faviconHtml = bookmark.favicon || getIcon(iconPack, 'link');\r\n                  return `\r\n          <div class=\"bookmark-item\" draggable=\"true\" data-bookmark-id=\"${bookmark.id}\">\r\n            <span class=\"bookmark-favicon\">${faviconHtml}</span>\r\n            <a href=\"${bookmark.url}\" target=\"_blank\" class=\"bookmark-link\" title=\"${bookmark.title}\">\r\n              ${bookmark.title}\r\n            </a>\r\n            <button class=\"bookmark-delete-btn icon-btn\" data-bookmark-id=\"${bookmark.id}\" title=\"Delete\">${getIcon(iconPack, 'delete')}</button>\r\n          </div>\r\n        `;\r\n                }\r\n              )\r\n              .join('')}\r\n      </div>\r\n    `;\r\n\r\n    this.attachBookmarkListeners();\r\n    this.setupDragAndDrop();\r\n  }\r\n\r\n  private attachWorkspaceListeners(): void {\r\n    const addBtn = document.getElementById('add-workspace-btn');\r\n    if (addBtn) {\r\n      addBtn.addEventListener('click', () => this.createWorkspace());\r\n    }\r\n\r\n    const workspaceItems = document.querySelectorAll('.workspace-item');\r\n    workspaceItems.forEach((item) => {\r\n      const workspaceId = item.getAttribute('data-workspace-id');\r\n      if (!workspaceId) return;\r\n\r\n      item.addEventListener('click', async (e) => {\r\n        if (!(e.target as HTMLElement).classList.contains('workspace-menu-btn')) {\r\n          await this.switchWorkspace(workspaceId);\r\n        }\r\n      });\r\n    });\r\n\r\n    const menuBtns = document.querySelectorAll('.workspace-menu-btn');\r\n    menuBtns.forEach((btn) => {\r\n      btn.addEventListener('click', (e) => {\r\n        e.stopPropagation();\r\n        const workspaceId = (e.target as HTMLElement).getAttribute('data-workspace-id');\r\n        if (workspaceId) {\r\n          this.showWorkspaceMenu(workspaceId);\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  private attachBookmarkListeners(): void {\r\n    const addBtn = document.getElementById('add-bookmark-btn');\r\n    if (addBtn) {\r\n      addBtn.addEventListener('click', () => this.createBookmark());\r\n    }\r\n\r\n    const deleteBtns = document.querySelectorAll('.bookmark-delete-btn');\r\n    deleteBtns.forEach((btn) => {\r\n      btn.addEventListener('click', async (e) => {\r\n        e.stopPropagation();\r\n        const bookmarkId = (e.target as HTMLElement).getAttribute('data-bookmark-id');\r\n        if (bookmarkId && this.currentWorkspace) {\r\n          await StorageService.deleteBookmark(this.currentWorkspace.id, bookmarkId);\r\n          await this.loadWorkspaceData();\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  private setupDragAndDrop(): void {\r\n    const bookmarkItems = document.querySelectorAll('.bookmark-item');\r\n    \r\n    bookmarkItems.forEach((item) => {\r\n      item.addEventListener('dragstart', (e) => {\r\n        this.isDragging = true;\r\n        this.draggedElement = item as HTMLElement;\r\n        (e.target as HTMLElement).classList.add('dragging');\r\n        e.dataTransfer!.effectAllowed = 'move';\r\n      });\r\n\r\n      item.addEventListener('dragend', (e) => {\r\n        (e.target as HTMLElement).classList.remove('dragging');\r\n        document.querySelectorAll('.bookmark-item').forEach(el => {\r\n          el.classList.remove('drag-over');\r\n        });\r\n        this.isDragging = false;\r\n        this.draggedElement = null;\r\n        this.dragOverElement = null;\r\n      });\r\n\r\n      item.addEventListener('dragover', (e) => {\r\n        e.preventDefault();\r\n        e.dataTransfer!.dropEffect = 'move';\r\n        \r\n        if (this.draggedElement && item !== this.draggedElement) {\r\n          this.dragOverElement = item as HTMLElement;\r\n          item.classList.add('drag-over');\r\n        }\r\n      });\r\n\r\n      item.addEventListener('dragleave', () => {\r\n        item.classList.remove('drag-over');\r\n      });\r\n\r\n      item.addEventListener('drop', async (e) => {\r\n        e.preventDefault();\r\n        item.classList.remove('drag-over');\r\n        \r\n        if (this.draggedElement && this.currentWorkspace) {\r\n          const list = document.getElementById('bookmarks-list');\r\n          if (!list) return;\r\n\r\n          const items = Array.from(list.querySelectorAll('.bookmark-item'));\r\n          const draggedId = this.draggedElement.getAttribute('data-bookmark-id');\r\n          const targetId = (item as HTMLElement).getAttribute('data-bookmark-id');\r\n          \r\n          if (draggedId && targetId && draggedId !== targetId) {\r\n            const draggedIndex = items.indexOf(this.draggedElement);\r\n            const targetIndex = items.indexOf(item as HTMLElement);\r\n            \r\n            if (draggedIndex < targetIndex) {\r\n              list.insertBefore(this.draggedElement, (item as HTMLElement).nextSibling);\r\n            } else {\r\n              list.insertBefore(this.draggedElement, item as HTMLElement);\r\n            }\r\n\r\n            // Save new order\r\n            const newOrder = Array.from(list.querySelectorAll('.bookmark-item')).map(\r\n              el => el.getAttribute('data-bookmark-id')!\r\n            );\r\n            await StorageService.reorderBookmarks(this.currentWorkspace.id, newOrder);\r\n            await this.loadWorkspaceData();\r\n          }\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  private async switchWorkspace(workspaceId: string): Promise<void> {\r\n    await StorageService.setCurrentWorkspace(workspaceId);\r\n    await this.loadWorkspaceData();\r\n  }\r\n\r\n  private async createWorkspace(): Promise<void> {\r\n    const name = prompt('Enter workspace name:');\r\n    if (!name || name.trim() === '') return;\r\n\r\n    try {\r\n      await StorageService.createWorkspace(name.trim());\r\n      await this.loadWorkspaceData();\r\n    } catch (error) {\r\n      console.error('Error creating workspace:', error);\r\n      alert('Failed to create workspace');\r\n    }\r\n  }\r\n\r\n  private async createBookmark(): Promise<void> {\r\n    if (!this.currentWorkspace) return;\r\n\r\n    const url = prompt('Enter bookmark URL:');\r\n    if (!url || url.trim() === '') return;\r\n\r\n    const title = prompt('Enter bookmark title (optional):') || new URL(url).hostname;\r\n\r\n    try {\r\n      const bookmark: Bookmark = {\r\n        id: `bookmark-${Date.now()}`,\r\n        title: title.trim(),\r\n        url: url.trim(),\r\n        position: this.currentWorkspace.bookmarks.length\r\n      };\r\n      await StorageService.addBookmark(this.currentWorkspace.id, bookmark);\r\n      await this.loadWorkspaceData();\r\n    } catch (error) {\r\n      console.error('Error creating bookmark:', error);\r\n      alert('Failed to create bookmark');\r\n    }\r\n  }\r\n\r\n  private showWorkspaceMenu(workspaceId: string): void {\r\n    // Simple menu for now - can be enhanced with a proper dropdown\r\n    const action = prompt('Workspace actions:\\n1. Rename\\n2. Delete\\n3. Settings\\n\\nEnter number:');\r\n    \r\n    if (action === '1') {\r\n      this.renameWorkspace(workspaceId);\r\n    } else if (action === '2') {\r\n      this.deleteWorkspace(workspaceId);\r\n    } else if (action === '3') {\r\n      this.openSettings(workspaceId);\r\n    }\r\n  }\r\n\r\n  private async renameWorkspace(workspaceId: string): Promise<void> {\r\n    const data = await StorageService.getWorkspaceData();\r\n    const workspace = data.workspaces.find(w => w.id === workspaceId);\r\n    if (!workspace) return;\r\n\r\n    const newName = prompt('Enter new workspace name:', workspace.name);\r\n    if (!newName || newName.trim() === '') return;\r\n\r\n    await StorageService.updateWorkspace(workspaceId, { name: newName.trim() });\r\n    await this.loadWorkspaceData();\r\n  }\r\n\r\n  private async deleteWorkspace(workspaceId: string): Promise<void> {\r\n    if (!confirm('Are you sure you want to delete this workspace?')) return;\r\n\r\n    try {\r\n      await StorageService.deleteWorkspace(workspaceId);\r\n      await this.loadWorkspaceData();\r\n    } catch (error: any) {\r\n      alert(error.message || 'Failed to delete workspace');\r\n    }\r\n  }\r\n\r\n  private async toggleCollapse(): Promise<void> {\r\n    if (!this.currentWorkspace) return;\r\n\r\n    // Respect workspace setting: if not collapsible, do nothing\r\n    if (!this.currentWorkspace.settings.collapsible) return;\r\n\r\n    const newCollapsed = !this.currentWorkspace.settings.collapsed;\r\n    await StorageService.updateWorkspaceSettings(this.currentWorkspace.id, { collapsed: newCollapsed });\r\n    await this.loadWorkspaceData();\r\n  }\r\n\r\n  private updateCollapseButton(): void {\r\n    const collapseBtn = document.getElementById('collapse-btn');\r\n    if (!collapseBtn || !this.currentWorkspace) return;\r\n\r\n    const settings = this.currentWorkspace.settings;\r\n\r\n    // Hide collapse button entirely when panel is not configured as collapsible\r\n    collapseBtn.style.display = settings.collapsible ? 'block' : 'none';\r\n\r\n    const iconPackId = settings.iconPackId || 'minimalist';\r\n    const iconPack = getIconPack(iconPackId);\r\n    collapseBtn.innerHTML = settings.collapsed ? getIcon(iconPack, 'expandRight') : getIcon(iconPack, 'collapseLeft');\r\n    \r\n    const sidepanel = document.getElementById('sidepanel');\r\n    if (sidepanel) {\r\n      const isCollapsed = settings.collapsible && settings.collapsed;\r\n      sidepanel.classList.toggle('collapsed', isCollapsed);\r\n    }\r\n  }\r\n\r\n  private async openSettings(workspaceId?: string): Promise<void> {\r\n    const targetWorkspaceId = workspaceId || this.currentWorkspace?.id;\r\n    if (!targetWorkspaceId) return;\r\n\r\n    const workspace = (await StorageService.getWorkspaceData()).workspaces.find(w => w.id === targetWorkspaceId);\r\n    if (!workspace) return;\r\n\r\n    const settingsPanel = document.getElementById('settings-panel');\r\n    if (!settingsPanel) return;\r\n\r\n    settingsPanel.innerHTML = `\r\n      <div class=\"settings-header\">\r\n        <h3>Settings: ${workspace.name}</h3>\r\n        <button id=\"close-settings-btn\" class=\"icon-btn\">${getIcon(getIconPack(workspace.settings.iconPackId || 'minimalist'), 'close')}</button>\r\n      </div>\r\n      <div class=\"settings-content\">\r\n        <div class=\"setting-group\">\r\n          <h4>Appearance</h4>\r\n          <label>\r\n            <input type=\"checkbox\" id=\"rounded-corners\" ${workspace.settings.roundedCorners ? 'checked' : ''}>\r\n            Rounded corners\r\n          </label>\r\n          <label>\r\n            Margin from side: <input type=\"number\" id=\"margin-side\" value=\"${workspace.settings.marginFromSide}\" min=\"0\" max=\"100\">\r\n          </label>\r\n          <label>\r\n            Margin top: <input type=\"number\" id=\"margin-top\" value=\"${workspace.settings.marginTop}\" min=\"0\" max=\"100\">\r\n          </label>\r\n          <label>\r\n            Margin bottom: <input type=\"number\" id=\"margin-bottom\" value=\"${workspace.settings.marginBottom}\" min=\"0\" max=\"100\">\r\n          </label>\r\n          <label>\r\n            Width: <input type=\"number\" id=\"panel-width\" value=\"${workspace.settings.width}\" min=\"200\" max=\"600\">\r\n          </label>\r\n        </div>\r\n        <div class=\"setting-group\">\r\n          <h4>Behavior</h4>\r\n          <label>\r\n            Mode:\r\n            <select id=\"panel-mode\">\r\n              <option value=\"fixed\" ${workspace.settings.mode === 'fixed' ? 'selected' : ''}>Fixed</option>\r\n              <option value=\"hovering\" ${workspace.settings.mode === 'hovering' ? 'selected' : ''}>Hovering</option>\r\n            </select>\r\n          </label>\r\n          <label>\r\n            <input type=\"checkbox\" id=\"collapsible\" ${workspace.settings.collapsible ? 'checked' : ''}>\r\n            Collapsible\r\n          </label>\r\n        </div>\r\n        <div class=\"setting-group\">\r\n          <h4>Icons</h4>\r\n          <label>\r\n            Icon Pack:\r\n            <select id=\"icon-pack\">\r\n              ${ICON_PACKS.map(pack => \r\n                `<option value=\"${pack.id}\" ${(workspace.settings.iconPackId || 'minimalist') === pack.id ? 'selected' : ''}>${pack.name}</option>`\r\n              ).join('')}\r\n            </select>\r\n          </label>\r\n        </div>\r\n        <div class=\"setting-group\">\r\n          <h4>On Close Behavior</h4>\r\n          <label>\r\n            <select id=\"on-close-behavior\">\r\n              <option value=\"continue\" ${workspace.settings.onCloseBehavior === 'continue' ? 'selected' : ''}>Continue where left off</option>\r\n              <option value=\"default\" ${workspace.settings.onCloseBehavior === 'default' ? 'selected' : ''}>Open default tabs</option>\r\n            </select>\r\n          </label>\r\n          <div id=\"default-tabs-section\" style=\"margin-top: 10px;\">\r\n            <label>Default tabs (one URL per line):</label>\r\n            <textarea id=\"default-tabs\" rows=\"5\" style=\"width: 100%;\">${workspace.settings.defaultTabs.join('\\n')}</textarea>\r\n          </div>\r\n        </div>\r\n        <button id=\"save-settings-btn\" class=\"save-btn\">Save Settings</button>\r\n      </div>\r\n    `;\r\n\r\n    settingsPanel.classList.remove('hidden');\r\n\r\n    // Attach event listeners\r\n    document.getElementById('close-settings-btn')?.addEventListener('click', () => {\r\n      settingsPanel.classList.add('hidden');\r\n    });\r\n\r\n    document.getElementById('save-settings-btn')?.addEventListener('click', async () => {\r\n      await this.saveSettings(targetWorkspaceId);\r\n    });\r\n  }\r\n\r\n  private async saveSettings(workspaceId: string): Promise<void> {\r\n    const current = this.currentWorkspace;\r\n\r\n    const collapsible =\r\n      (document.getElementById('collapsible') as HTMLInputElement)?.checked ?? true;\r\n\r\n    const settings: Partial<WorkspaceSettings> = {\r\n      roundedCorners: (document.getElementById('rounded-corners') as HTMLInputElement)?.checked ?? true,\r\n      marginFromSide: parseInt((document.getElementById('margin-side') as HTMLInputElement)?.value || '10'),\r\n      marginTop: parseInt((document.getElementById('margin-top') as HTMLInputElement)?.value || '10'),\r\n      marginBottom: parseInt((document.getElementById('margin-bottom') as HTMLInputElement)?.value || '10'),\r\n      width: parseInt((document.getElementById('panel-width') as HTMLInputElement)?.value || '300'),\r\n      mode: (document.getElementById('panel-mode') as HTMLSelectElement)?.value as 'fixed' | 'hovering',\r\n      collapsible,\r\n      // If collapsibility is turned off, force panel to expanded state\r\n      collapsed: collapsible ? (current?.settings.collapsed ?? false) : false,\r\n      onCloseBehavior: (document.getElementById('on-close-behavior') as HTMLSelectElement)?.value as 'continue' | 'default',\r\n      defaultTabs: (document.getElementById('default-tabs') as HTMLTextAreaElement)?.value\r\n        .split('\\n')\r\n        .map(url => url.trim())\r\n        .filter(url => url !== ''),\r\n      iconPackId: (document.getElementById('icon-pack') as HTMLSelectElement)?.value || 'minimalist'\r\n    };\r\n    // Hovering mode always uses collapsible panel\r\n    if (settings.mode === 'hovering') settings.collapsible = true;\r\n\r\n    await StorageService.updateWorkspaceSettings(workspaceId, settings);\r\n    await this.loadWorkspaceData();\r\n    \r\n    // Update icons immediately after saving\r\n    this.updateIcons();\r\n    \r\n    const settingsPanel = document.getElementById('settings-panel');\r\n    if (settingsPanel) {\r\n      settingsPanel.classList.add('hidden');\r\n    }\r\n  }\r\n\r\n  private applyWorkspaceStyles(): void {\r\n    if (!this.currentWorkspace) return;\r\n\r\n    const sidepanel = document.getElementById('sidepanel');\r\n    if (!sidepanel) return;\r\n\r\n    const settings = this.currentWorkspace.settings;\r\n    const root = document.documentElement;\r\n\r\n    // Apply CSS custom properties\r\n    root.style.setProperty('--panel-width', `${settings.width}px`);\r\n    root.style.setProperty('--margin-side', `${settings.marginFromSide}px`);\r\n    root.style.setProperty('--margin-top', `${settings.marginTop}px`);\r\n    root.style.setProperty('--margin-bottom', `${settings.marginBottom}px`);\r\n\r\n    // Apply mode\r\n    sidepanel.classList.toggle('mode-fixed', settings.mode === 'fixed');\r\n    sidepanel.classList.toggle('mode-hovering', settings.mode === 'hovering');\r\n    sidepanel.classList.toggle('rounded-corners', settings.roundedCorners);\r\n    sidepanel.classList.toggle('collapsed', settings.collapsed);\r\n    sidepanel.classList.toggle('collapsible', settings.collapsible);\r\n  }\r\n\r\n}\r\n\r\n// Initialize when DOM is ready\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n  new SidePanelManager();\r\n});\r\n"],
  "mappings": ";AAyGA,IAAM,mBAAsC;AAAA,EAC1C,gBAAgB;AAAA,EAChB,gBAAgB;AAAA,EAChB,WAAW;AAAA,EACX,cAAc;AAAA,EACd,OAAO;AAAA;AAAA,EACP,cAAc;AAAA;AAAA,EACd,kBAAkB;AAAA;AAAA,EAClB,UAAU;AAAA,EACV,WAAW;AAAA,EACX,iBAAiB;AAAA,EACjB,qBAAqB;AAAA,EACrB,eAAe;AAAA,EACf,aAAa;AAAA,EACb,aAAa;AAAA,EACb,MAAM;AAAA,EACN,aAAa;AAAA,EACb,WAAW;AAAA,EACX,iBAAiB;AAAA,EACjB,aAAa,CAAC;AAAA,EACd,YAAY;AAAA;AACd;AAEO,IAAM,iBAAN,MAAqB;AAAA;AAAA,EAI1B,aAAa,mBAA2C;AACtD,UAAM,SAAS,MAAM,OAAO,QAAQ,MAAM,IAAI,KAAK,WAAW;AAC9D,QAAI,CAAC,OAAO,KAAK,WAAW,GAAG;AAE7B,YAAM,cAA6B;AAAA,QACjC,YAAY,CAAC;AAAA,UACX,IAAI;AAAA,UACJ,MAAM;AAAA,UACN,QAAQ;AAAA,UACR,WAAW,CAAC;AAAA,UACZ,UAAU,CAAC;AAAA,UACX,YAAY,CAAC;AAAA,UACb,UAAU,EAAE,GAAG,iBAAiB;AAAA,UAChC,WAAW,KAAK,IAAI;AAAA,UACpB,WAAW,KAAK,IAAI;AAAA,QACtB,CAAC;AAAA,QACD,oBAAoB;AAAA,MACtB;AACA,YAAM,KAAK,kBAAkB,WAAW;AACxC,aAAO;AAAA,IACT;AACA,WAAO,OAAO,KAAK,WAAW;AAAA,EAChC;AAAA;AAAA,EAGA,aAAa,kBAAkB,MAAoC;AACjE,UAAM,OAAO,QAAQ,MAAM,IAAI,EAAE,CAAC,KAAK,WAAW,GAAG,KAAK,CAAC;AAAA,EAC7D;AAAA;AAAA,EAGA,aAAa,sBAA0C;AACrD,UAAM,OAAO,MAAM,KAAK,iBAAiB;AACzC,UAAM,YAAY,KAAK,WAAW,KAAK,OAAK,EAAE,OAAO,KAAK,kBAAkB;AAC5E,QAAI,CAAC,WAAW;AACd,YAAM,IAAI,MAAM,6BAA6B;AAAA,IAC/C;AACA,WAAO;AAAA,EACT;AAAA;AAAA,EAGA,aAAa,oBAAoB,aAAoC;AACnE,UAAM,OAAO,MAAM,KAAK,iBAAiB;AACzC,SAAK,WAAW,QAAQ,OAAK,EAAE,SAAS,EAAE,OAAO,WAAW;AAC5D,SAAK,qBAAqB;AAC1B,UAAM,KAAK,kBAAkB,IAAI;AAAA,EACnC;AAAA;AAAA,EAGA,aAAa,gBAAgB,MAAkC;AAC7D,UAAM,OAAO,MAAM,KAAK,iBAAiB;AACzC,UAAM,eAA0B;AAAA,MAC9B,IAAI,aAAa,KAAK,IAAI,CAAC;AAAA,MAC3B;AAAA,MACA,QAAQ;AAAA,MACR,WAAW,CAAC;AAAA,MACZ,UAAU,CAAC;AAAA,MACX,YAAY,CAAC;AAAA,MACb,UAAU,EAAE,GAAG,iBAAiB;AAAA,MAChC,WAAW,KAAK,IAAI;AAAA,MACpB,WAAW,KAAK,IAAI;AAAA,IACtB;AACA,SAAK,WAAW,KAAK,YAAY;AACjC,UAAM,KAAK,kBAAkB,IAAI;AACjC,WAAO;AAAA,EACT;AAAA;AAAA,EAGA,aAAa,gBAAgB,aAAqB,SAA4C;AAC5F,UAAM,OAAO,MAAM,KAAK,iBAAiB;AACzC,UAAM,QAAQ,KAAK,WAAW,UAAU,OAAK,EAAE,OAAO,WAAW;AACjE,QAAI,UAAU,GAAI,OAAM,IAAI,MAAM,qBAAqB;AAEvD,SAAK,WAAW,KAAK,IAAI;AAAA,MACvB,GAAG,KAAK,WAAW,KAAK;AAAA,MACxB,GAAG;AAAA,MACH,WAAW,KAAK,IAAI;AAAA,IACtB;AACA,UAAM,KAAK,kBAAkB,IAAI;AAAA,EACnC;AAAA;AAAA,EAGA,aAAa,gBAAgB,aAAoC;AAC/D,UAAM,OAAO,MAAM,KAAK,iBAAiB;AACzC,QAAI,KAAK,WAAW,WAAW,GAAG;AAChC,YAAM,IAAI,MAAM,kCAAkC;AAAA,IACpD;AACA,SAAK,aAAa,KAAK,WAAW,OAAO,OAAK,EAAE,OAAO,WAAW;AAClE,QAAI,KAAK,uBAAuB,aAAa;AAC3C,WAAK,qBAAqB,KAAK,WAAW,CAAC,EAAE;AAC7C,WAAK,WAAW,CAAC,EAAE,SAAS;AAAA,IAC9B;AACA,UAAM,KAAK,kBAAkB,IAAI;AAAA,EACnC;AAAA;AAAA,EAGA,aAAa,YAAY,aAAqB,UAAmC;AAC/E,UAAM,aAAa,MAAM,KAAK,iBAAiB,GAAG,WAAW,KAAK,OAAK,EAAE,OAAO,WAAW;AAC3F,QAAI,CAAC,UAAW,OAAM,IAAI,MAAM,qBAAqB;AAErD,cAAU,UAAU,KAAK,QAAQ;AACjC,UAAM,KAAK,gBAAgB,aAAa,EAAE,WAAW,UAAU,UAAU,CAAC;AAAA,EAC5E;AAAA;AAAA,EAGA,aAAa,eAAe,aAAqB,YAAoB,SAA2C;AAC9G,UAAM,aAAa,MAAM,KAAK,iBAAiB,GAAG,WAAW,KAAK,OAAK,EAAE,OAAO,WAAW;AAC3F,QAAI,CAAC,UAAW,OAAM,IAAI,MAAM,qBAAqB;AAErD,UAAM,QAAQ,UAAU,UAAU,UAAU,OAAK,EAAE,OAAO,UAAU;AACpE,QAAI,UAAU,GAAI,OAAM,IAAI,MAAM,oBAAoB;AAEtD,cAAU,UAAU,KAAK,IAAI,EAAE,GAAG,UAAU,UAAU,KAAK,GAAG,GAAG,QAAQ;AACzE,UAAM,KAAK,gBAAgB,aAAa,EAAE,WAAW,UAAU,UAAU,CAAC;AAAA,EAC5E;AAAA;AAAA,EAGA,aAAa,eAAe,aAAqB,YAAmC;AAClF,UAAM,aAAa,MAAM,KAAK,iBAAiB,GAAG,WAAW,KAAK,OAAK,EAAE,OAAO,WAAW;AAC3F,QAAI,CAAC,UAAW,OAAM,IAAI,MAAM,qBAAqB;AAErD,cAAU,YAAY,UAAU,UAAU,OAAO,OAAK,EAAE,OAAO,UAAU;AACzE,UAAM,KAAK,gBAAgB,aAAa,EAAE,WAAW,UAAU,UAAU,CAAC;AAAA,EAC5E;AAAA;AAAA,EAGA,aAAa,iBAAiB,aAAqB,aAAsC;AACvF,UAAM,aAAa,MAAM,KAAK,iBAAiB,GAAG,WAAW,KAAK,OAAK,EAAE,OAAO,WAAW;AAC3F,QAAI,CAAC,UAAW,OAAM,IAAI,MAAM,qBAAqB;AAErD,UAAM,cAAc,IAAI,IAAI,UAAU,UAAU,IAAI,OAAK,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC;AACnE,cAAU,YAAY,YAAY,IAAI,CAAC,IAAI,WAAW;AAAA,MACpD,GAAG,YAAY,IAAI,EAAE;AAAA,MACrB,UAAU;AAAA,IACZ,EAAE;AACF,UAAM,KAAK,gBAAgB,aAAa,EAAE,WAAW,UAAU,UAAU,CAAC;AAAA,EAC5E;AAAA;AAAA;AAAA,EAIA,aAAa,eAAe,aAAqB,MAAwC;AACvF,UAAM,YAAY,KAAK,KAAK,OAAK,EAAE,MAAM;AACzC,UAAM,eAAe,WAAW,OAAO,CAAC,UAAU,IAAI,WAAW,WAAW,KAAK,CAAC,UAAU,IAAI,WAAW,qBAAqB,IAC5H,UAAU,MACV;AACJ,UAAM,aAA8B,KACjC,OAAO,OAAK,EAAE,OAAO,CAAC,EAAE,IAAI,WAAW,WAAW,KAAK,CAAC,EAAE,IAAI,WAAW,qBAAqB,CAAC,EAC/F,IAAI,QAAM,EAAE,KAAK,EAAE,KAAM,OAAO,EAAE,MAAM,EAAE;AAC7C,UAAM,KAAK,gBAAgB,aAAa,EAAE,YAAY,cAAc,gBAAgB,OAAU,CAAC;AAAA,EACjG;AAAA;AAAA,EAGA,aAAa,wBAAwB,aAAqB,UAAqD;AAC7G,UAAM,aAAa,MAAM,KAAK,iBAAiB,GAAG,WAAW,KAAK,OAAK,EAAE,OAAO,WAAW;AAC3F,QAAI,CAAC,UAAW,OAAM,IAAI,MAAM,qBAAqB;AAErD,cAAU,WAAW,EAAE,GAAG,UAAU,UAAU,GAAG,SAAS;AAC1D,UAAM,KAAK,gBAAgB,aAAa,EAAE,UAAU,UAAU,SAAS,CAAC;AAAA,EAC1E;AACF;AAlKa,eACa,cAAc;;;ACtHjC,IAAM,uBAAiC;AAAA,EAC5C,IAAI;AAAA,EACJ,MAAM;AAAA,EACN,OAAO;AAAA;AAAA,IAEL,UAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAUV,cAAc;AAAA;AAAA;AAAA;AAAA,IAKd,aAAa;AAAA;AAAA;AAAA;AAAA,IAKb,MAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAON,MAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IASN,KAAK;AAAA;AAAA;AAAA;AAAA,IAKL,QAAQ;AAAA;AAAA;AAAA;AAAA,IAKR,OAAO;AAAA;AAAA;AAAA,EAGT;AACF;AAGO,IAAM,wBAAkC;AAAA,EAC7C,IAAI;AAAA,EACJ,MAAM;AAAA,EACN,OAAO;AAAA,IACL,UAAU;AAAA;AAAA;AAAA;AAAA,IAKV,cAAc;AAAA;AAAA;AAAA,IAId,aAAa;AAAA;AAAA;AAAA,IAIb,MAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAON,MAAM;AAAA;AAAA;AAAA;AAAA,IAKN,KAAK;AAAA;AAAA;AAAA,IAIL,QAAQ;AAAA;AAAA;AAAA,IAIR,OAAO;AAAA;AAAA;AAAA,EAGT;AACF;AAGO,IAAM,0BAAoC;AAAA,EAC/C,IAAI;AAAA,EACJ,MAAM;AAAA,EACN,OAAO;AAAA,IACL,UAAU;AAAA;AAAA;AAAA;AAAA,IAKV,cAAc;AAAA;AAAA;AAAA,IAId,aAAa;AAAA;AAAA;AAAA,IAIb,MAAM;AAAA;AAAA;AAAA;AAAA;AAAA,IAMN,MAAM;AAAA;AAAA;AAAA;AAAA;AAAA,IAMN,KAAK;AAAA;AAAA;AAAA;AAAA,IAKL,QAAQ;AAAA;AAAA;AAAA;AAAA,IAKR,OAAO;AAAA;AAAA;AAAA;AAAA,EAIT;AACF;AAEO,IAAM,aAAyB;AAAA,EACpC;AAAA,EACA;AAAA,EACA;AACF;AAEO,SAAS,YAAY,IAAsB;AAChD,SAAO,WAAW,KAAK,UAAQ,KAAK,OAAO,EAAE,KAAK;AACpD;AAEO,SAAS,QAAQ,UAAoB,UAA0B;AACpE,SAAO,SAAS,MAAM,QAAQ,KAAK,SAAS,MAAM,QAAQ;AAC5D;;;ACrKA,IAAM,mBAAN,MAAuB;AAAA,EAMrB,cAAc;AALd,SAAQ,mBAAqC;AAC7C,SAAQ,aAAsB;AAC9B,SAAQ,iBAAqC;AAC7C,SAAQ,kBAAsC;AAG5C,SAAK,aAAa;AAClB,SAAK,kBAAkB;AAAA,EACzB;AAAA,EAEA,MAAc,eAA8B;AAC1C,YAAQ,IAAI,4BAA4B;AACxC,UAAM,qBAAqB,SAAS,eAAe,WAAW;AAC9D,QAAI,CAAC,mBAAoB;AAGzB,UAAM,cAAc,SAAS,cAAc,QAAQ;AACnD,gBAAY,KAAK;AACjB,gBAAY,YAAY;AACxB,gBAAY,QAAQ;AACpB,gBAAY,iBAAiB,SAAS,MAAM,KAAK,aAAa,CAAC;AAC/D,uBAAmB,YAAY,WAAW;AAG1C,UAAM,cAAc,SAAS,cAAc,QAAQ;AACnD,gBAAY,KAAK;AACjB,gBAAY,YAAY;AACxB,gBAAY,QAAQ;AACpB,gBAAY,iBAAiB,SAAS,MAAM,KAAK,eAAe,CAAC;AACjE,uBAAmB,YAAY,WAAW;AAG1C,UAAM,oBAAoB,SAAS,cAAc,KAAK;AACtD,sBAAkB,KAAK;AACvB,sBAAkB,YAAY;AAC9B,uBAAmB,YAAY,iBAAiB;AAGhD,UAAM,qBAAqB,SAAS,cAAc,KAAK;AACvD,uBAAmB,KAAK;AACxB,uBAAmB,YAAY;AAC/B,uBAAmB,YAAY,kBAAkB;AAGjD,UAAM,gBAAgB,SAAS,cAAc,KAAK;AAClD,kBAAc,KAAK;AACnB,kBAAc,YAAY;AAC1B,uBAAmB,YAAY,aAAa;AAG5C,SAAK,qBAAqB;AAAA,EAC5B;AAAA,EAEA,MAAc,oBAAmC;AAC/C,QAAI;AACF,WAAK,mBAAmB,MAAM,eAAe,oBAAoB;AACjE,WAAK,SAAS;AACd,WAAK,qBAAqB;AAAA,IAC5B,SAAS,OAAO;AACd,cAAQ,MAAM,iCAAiC,KAAK;AAAA,IACtD;AAAA,EACF;AAAA,EAEA,MAAc,WAA0B;AACtC,QAAI,CAAC,KAAK,iBAAkB;AAE5B,UAAM,KAAK,wBAAwB;AACnC,UAAM,KAAK,gBAAgB;AAC3B,SAAK,qBAAqB;AAC1B,SAAK,YAAY;AAAA,EACnB;AAAA,EAEQ,cAAoB;AAC1B,QAAI,CAAC,KAAK,iBAAkB;AAE5B,UAAM,aAAa,KAAK,iBAAiB,SAAS,cAAc;AAChE,UAAM,WAAW,YAAY,UAAU;AAGvC,UAAM,cAAc,SAAS,eAAe,cAAc;AAC1D,QAAI,aAAa;AACf,kBAAY,YAAY,QAAQ,UAAU,UAAU;AAAA,IACtD;AAGA,UAAM,cAAc,SAAS,eAAe,cAAc;AAC1D,QAAI,aAAa;AACf,YAAM,WAAW,KAAK,iBAAiB,SAAS,YAAY,gBAAgB;AAC5E,kBAAY,YAAY,QAAQ,UAAU,QAAQ;AAAA,IACpD;AAAA,EACF;AAAA,EAEA,MAAc,0BAAyC;AACrD,UAAM,WAAW,SAAS,eAAe,oBAAoB;AAC7D,QAAI,CAAC,SAAU;AAEf,UAAM,OAAO,MAAM,eAAe,iBAAiB;AACnD,UAAM,aAAa,KAAK;AAGxB,UAAM,mBAAmB,WAAW,KAAK,OAAK,EAAE,MAAM,KAAK,WAAW,CAAC;AACvE,UAAM,aAAa,kBAAkB,UAAU,cAAc;AAC7D,UAAM,WAAW,YAAY,UAAU;AAEvC,aAAS,YAAY;AAAA;AAAA;AAAA,oFAG2D,QAAQ,UAAU,KAAK,CAAC;AAAA;AAAA;AAAA,UAGlG,WACC;AAAA,MACC,CAAC,OAAO;AACN,cAAM,eAAe,GAAG,UAAU,cAAc;AAChD,cAAM,aAAa,YAAY,YAAY;AAC3C,eAAO;AAAA,uCACkB,GAAG,SAAS,WAAW,EAAE,wBAAwB,GAAG,EAAE;AAAA,2CAClD,GAAG,IAAI;AAAA,6EAC2B,GAAG,EAAE,KAAK,QAAQ,YAAY,MAAM,CAAC;AAAA;AAAA;AAAA,MAGtG;AAAA,IACF,EACC,KAAK,EAAE,CAAC;AAAA;AAAA;AAIf,SAAK,yBAAyB;AAAA,EAChC;AAAA,EAEA,MAAc,kBAAiC;AAC7C,UAAM,YAAY,SAAS,eAAe,qBAAqB;AAC/D,QAAI,CAAC,aAAa,CAAC,KAAK,iBAAkB;AAG1C,UAAM,kBAAkB,CAAC,GAAG,KAAK,iBAAiB,SAAS,EAAE,KAAK,CAAC,GAAG,MAAM;AAC1E,YAAM,OAAO,EAAE,YAAY;AAC3B,YAAM,OAAO,EAAE,YAAY;AAC3B,aAAO,OAAO;AAAA,IAChB,CAAC;AAED,UAAM,aAAa,KAAK,iBAAiB,SAAS,cAAc;AAChE,UAAM,WAAW,YAAY,UAAU;AAEvC,cAAU,YAAY;AAAA;AAAA;AAAA,kFAGwD,QAAQ,UAAU,KAAK,CAAC;AAAA;AAAA;AAAA,UAGhG,gBAAgB,WAAW,IACzB,yEACA,gBACG;AAAA,MACC,CAAC,aAAa;AAEZ,cAAM,cAAc,SAAS,WAAW,QAAQ,UAAU,MAAM;AAChE,eAAO;AAAA,0EACiD,SAAS,EAAE;AAAA,6CACxC,WAAW;AAAA,uBACjC,SAAS,GAAG,kDAAkD,SAAS,KAAK;AAAA,gBACnF,SAAS,KAAK;AAAA;AAAA,6EAE+C,SAAS,EAAE,oBAAoB,QAAQ,UAAU,QAAQ,CAAC;AAAA;AAAA;AAAA,MAGvH;AAAA,IACF,EACC,KAAK,EAAE,CAAC;AAAA;AAAA;AAInB,SAAK,wBAAwB;AAC7B,SAAK,iBAAiB;AAAA,EACxB;AAAA,EAEQ,2BAAiC;AACvC,UAAM,SAAS,SAAS,eAAe,mBAAmB;AAC1D,QAAI,QAAQ;AACV,aAAO,iBAAiB,SAAS,MAAM,KAAK,gBAAgB,CAAC;AAAA,IAC/D;AAEA,UAAM,iBAAiB,SAAS,iBAAiB,iBAAiB;AAClE,mBAAe,QAAQ,CAAC,SAAS;AAC/B,YAAM,cAAc,KAAK,aAAa,mBAAmB;AACzD,UAAI,CAAC,YAAa;AAElB,WAAK,iBAAiB,SAAS,OAAO,MAAM;AAC1C,YAAI,CAAE,EAAE,OAAuB,UAAU,SAAS,oBAAoB,GAAG;AACvE,gBAAM,KAAK,gBAAgB,WAAW;AAAA,QACxC;AAAA,MACF,CAAC;AAAA,IACH,CAAC;AAED,UAAM,WAAW,SAAS,iBAAiB,qBAAqB;AAChE,aAAS,QAAQ,CAAC,QAAQ;AACxB,UAAI,iBAAiB,SAAS,CAAC,MAAM;AACnC,UAAE,gBAAgB;AAClB,cAAM,cAAe,EAAE,OAAuB,aAAa,mBAAmB;AAC9E,YAAI,aAAa;AACf,eAAK,kBAAkB,WAAW;AAAA,QACpC;AAAA,MACF,CAAC;AAAA,IACH,CAAC;AAAA,EACH;AAAA,EAEQ,0BAAgC;AACtC,UAAM,SAAS,SAAS,eAAe,kBAAkB;AACzD,QAAI,QAAQ;AACV,aAAO,iBAAiB,SAAS,MAAM,KAAK,eAAe,CAAC;AAAA,IAC9D;AAEA,UAAM,aAAa,SAAS,iBAAiB,sBAAsB;AACnE,eAAW,QAAQ,CAAC,QAAQ;AAC1B,UAAI,iBAAiB,SAAS,OAAO,MAAM;AACzC,UAAE,gBAAgB;AAClB,cAAM,aAAc,EAAE,OAAuB,aAAa,kBAAkB;AAC5E,YAAI,cAAc,KAAK,kBAAkB;AACvC,gBAAM,eAAe,eAAe,KAAK,iBAAiB,IAAI,UAAU;AACxE,gBAAM,KAAK,kBAAkB;AAAA,QAC/B;AAAA,MACF,CAAC;AAAA,IACH,CAAC;AAAA,EACH;AAAA,EAEQ,mBAAyB;AAC/B,UAAM,gBAAgB,SAAS,iBAAiB,gBAAgB;AAEhE,kBAAc,QAAQ,CAAC,SAAS;AAC9B,WAAK,iBAAiB,aAAa,CAAC,MAAM;AACxC,aAAK,aAAa;AAClB,aAAK,iBAAiB;AACtB,QAAC,EAAE,OAAuB,UAAU,IAAI,UAAU;AAClD,UAAE,aAAc,gBAAgB;AAAA,MAClC,CAAC;AAED,WAAK,iBAAiB,WAAW,CAAC,MAAM;AACtC,QAAC,EAAE,OAAuB,UAAU,OAAO,UAAU;AACrD,iBAAS,iBAAiB,gBAAgB,EAAE,QAAQ,QAAM;AACxD,aAAG,UAAU,OAAO,WAAW;AAAA,QACjC,CAAC;AACD,aAAK,aAAa;AAClB,aAAK,iBAAiB;AACtB,aAAK,kBAAkB;AAAA,MACzB,CAAC;AAED,WAAK,iBAAiB,YAAY,CAAC,MAAM;AACvC,UAAE,eAAe;AACjB,UAAE,aAAc,aAAa;AAE7B,YAAI,KAAK,kBAAkB,SAAS,KAAK,gBAAgB;AACvD,eAAK,kBAAkB;AACvB,eAAK,UAAU,IAAI,WAAW;AAAA,QAChC;AAAA,MACF,CAAC;AAED,WAAK,iBAAiB,aAAa,MAAM;AACvC,aAAK,UAAU,OAAO,WAAW;AAAA,MACnC,CAAC;AAED,WAAK,iBAAiB,QAAQ,OAAO,MAAM;AACzC,UAAE,eAAe;AACjB,aAAK,UAAU,OAAO,WAAW;AAEjC,YAAI,KAAK,kBAAkB,KAAK,kBAAkB;AAChD,gBAAM,OAAO,SAAS,eAAe,gBAAgB;AACrD,cAAI,CAAC,KAAM;AAEX,gBAAM,QAAQ,MAAM,KAAK,KAAK,iBAAiB,gBAAgB,CAAC;AAChE,gBAAM,YAAY,KAAK,eAAe,aAAa,kBAAkB;AACrE,gBAAM,WAAY,KAAqB,aAAa,kBAAkB;AAEtE,cAAI,aAAa,YAAY,cAAc,UAAU;AACnD,kBAAM,eAAe,MAAM,QAAQ,KAAK,cAAc;AACtD,kBAAM,cAAc,MAAM,QAAQ,IAAmB;AAErD,gBAAI,eAAe,aAAa;AAC9B,mBAAK,aAAa,KAAK,gBAAiB,KAAqB,WAAW;AAAA,YAC1E,OAAO;AACL,mBAAK,aAAa,KAAK,gBAAgB,IAAmB;AAAA,YAC5D;AAGA,kBAAM,WAAW,MAAM,KAAK,KAAK,iBAAiB,gBAAgB,CAAC,EAAE;AAAA,cACnE,QAAM,GAAG,aAAa,kBAAkB;AAAA,YAC1C;AACA,kBAAM,eAAe,iBAAiB,KAAK,iBAAiB,IAAI,QAAQ;AACxE,kBAAM,KAAK,kBAAkB;AAAA,UAC/B;AAAA,QACF;AAAA,MACF,CAAC;AAAA,IACH,CAAC;AAAA,EACH;AAAA,EAEA,MAAc,gBAAgB,aAAoC;AAChE,UAAM,eAAe,oBAAoB,WAAW;AACpD,UAAM,KAAK,kBAAkB;AAAA,EAC/B;AAAA,EAEA,MAAc,kBAAiC;AAC7C,UAAM,OAAO,OAAO,uBAAuB;AAC3C,QAAI,CAAC,QAAQ,KAAK,KAAK,MAAM,GAAI;AAEjC,QAAI;AACF,YAAM,eAAe,gBAAgB,KAAK,KAAK,CAAC;AAChD,YAAM,KAAK,kBAAkB;AAAA,IAC/B,SAAS,OAAO;AACd,cAAQ,MAAM,6BAA6B,KAAK;AAChD,YAAM,4BAA4B;AAAA,IACpC;AAAA,EACF;AAAA,EAEA,MAAc,iBAAgC;AAC5C,QAAI,CAAC,KAAK,iBAAkB;AAE5B,UAAM,MAAM,OAAO,qBAAqB;AACxC,QAAI,CAAC,OAAO,IAAI,KAAK,MAAM,GAAI;AAE/B,UAAM,QAAQ,OAAO,kCAAkC,KAAK,IAAI,IAAI,GAAG,EAAE;AAEzE,QAAI;AACF,YAAM,WAAqB;AAAA,QACzB,IAAI,YAAY,KAAK,IAAI,CAAC;AAAA,QAC1B,OAAO,MAAM,KAAK;AAAA,QAClB,KAAK,IAAI,KAAK;AAAA,QACd,UAAU,KAAK,iBAAiB,UAAU;AAAA,MAC5C;AACA,YAAM,eAAe,YAAY,KAAK,iBAAiB,IAAI,QAAQ;AACnE,YAAM,KAAK,kBAAkB;AAAA,IAC/B,SAAS,OAAO;AACd,cAAQ,MAAM,4BAA4B,KAAK;AAC/C,YAAM,2BAA2B;AAAA,IACnC;AAAA,EACF;AAAA,EAEQ,kBAAkB,aAA2B;AAEnD,UAAM,SAAS,OAAO,wEAAwE;AAE9F,QAAI,WAAW,KAAK;AAClB,WAAK,gBAAgB,WAAW;AAAA,IAClC,WAAW,WAAW,KAAK;AACzB,WAAK,gBAAgB,WAAW;AAAA,IAClC,WAAW,WAAW,KAAK;AACzB,WAAK,aAAa,WAAW;AAAA,IAC/B;AAAA,EACF;AAAA,EAEA,MAAc,gBAAgB,aAAoC;AAChE,UAAM,OAAO,MAAM,eAAe,iBAAiB;AACnD,UAAM,YAAY,KAAK,WAAW,KAAK,OAAK,EAAE,OAAO,WAAW;AAChE,QAAI,CAAC,UAAW;AAEhB,UAAM,UAAU,OAAO,6BAA6B,UAAU,IAAI;AAClE,QAAI,CAAC,WAAW,QAAQ,KAAK,MAAM,GAAI;AAEvC,UAAM,eAAe,gBAAgB,aAAa,EAAE,MAAM,QAAQ,KAAK,EAAE,CAAC;AAC1E,UAAM,KAAK,kBAAkB;AAAA,EAC/B;AAAA,EAEA,MAAc,gBAAgB,aAAoC;AAChE,QAAI,CAAC,QAAQ,iDAAiD,EAAG;AAEjE,QAAI;AACF,YAAM,eAAe,gBAAgB,WAAW;AAChD,YAAM,KAAK,kBAAkB;AAAA,IAC/B,SAAS,OAAY;AACnB,YAAM,MAAM,WAAW,4BAA4B;AAAA,IACrD;AAAA,EACF;AAAA,EAEA,MAAc,iBAAgC;AAC5C,QAAI,CAAC,KAAK,iBAAkB;AAG5B,QAAI,CAAC,KAAK,iBAAiB,SAAS,YAAa;AAEjD,UAAM,eAAe,CAAC,KAAK,iBAAiB,SAAS;AACrD,UAAM,eAAe,wBAAwB,KAAK,iBAAiB,IAAI,EAAE,WAAW,aAAa,CAAC;AAClG,UAAM,KAAK,kBAAkB;AAAA,EAC/B;AAAA,EAEQ,uBAA6B;AACnC,UAAM,cAAc,SAAS,eAAe,cAAc;AAC1D,QAAI,CAAC,eAAe,CAAC,KAAK,iBAAkB;AAE5C,UAAM,WAAW,KAAK,iBAAiB;AAGvC,gBAAY,MAAM,UAAU,SAAS,cAAc,UAAU;AAE7D,UAAM,aAAa,SAAS,cAAc;AAC1C,UAAM,WAAW,YAAY,UAAU;AACvC,gBAAY,YAAY,SAAS,YAAY,QAAQ,UAAU,aAAa,IAAI,QAAQ,UAAU,cAAc;AAEhH,UAAM,YAAY,SAAS,eAAe,WAAW;AACrD,QAAI,WAAW;AACb,YAAM,cAAc,SAAS,eAAe,SAAS;AACrD,gBAAU,UAAU,OAAO,aAAa,WAAW;AAAA,IACrD;AAAA,EACF;AAAA,EAEA,MAAc,aAAa,aAAqC;AAC9D,UAAM,oBAAoB,eAAe,KAAK,kBAAkB;AAChE,QAAI,CAAC,kBAAmB;AAExB,UAAM,aAAa,MAAM,eAAe,iBAAiB,GAAG,WAAW,KAAK,OAAK,EAAE,OAAO,iBAAiB;AAC3G,QAAI,CAAC,UAAW;AAEhB,UAAM,gBAAgB,SAAS,eAAe,gBAAgB;AAC9D,QAAI,CAAC,cAAe;AAEpB,kBAAc,YAAY;AAAA;AAAA,wBAEN,UAAU,IAAI;AAAA,2DACqB,QAAQ,YAAY,UAAU,SAAS,cAAc,YAAY,GAAG,OAAO,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0DAM7E,UAAU,SAAS,iBAAiB,YAAY,EAAE;AAAA;AAAA;AAAA;AAAA,6EAI/B,UAAU,SAAS,cAAc;AAAA;AAAA;AAAA,sEAGxC,UAAU,SAAS,SAAS;AAAA;AAAA;AAAA,4EAGtB,UAAU,SAAS,YAAY;AAAA;AAAA;AAAA,kEAGzC,UAAU,SAAS,KAAK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sCAQpD,UAAU,SAAS,SAAS,UAAU,aAAa,EAAE;AAAA,yCAClD,UAAU,SAAS,SAAS,aAAa,aAAa,EAAE;AAAA;AAAA;AAAA;AAAA,sDAI3C,UAAU,SAAS,cAAc,YAAY,EAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBASrF,WAAW;AAAA,MAAI,UACf,kBAAkB,KAAK,EAAE,MAAM,UAAU,SAAS,cAAc,kBAAkB,KAAK,KAAK,aAAa,EAAE,IAAI,KAAK,IAAI;AAAA,IAC1H,EAAE,KAAK,EAAE,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yCAQiB,UAAU,SAAS,oBAAoB,aAAa,aAAa,EAAE;AAAA,wCACpE,UAAU,SAAS,oBAAoB,YAAY,aAAa,EAAE;AAAA;AAAA;AAAA;AAAA;AAAA,wEAKlC,UAAU,SAAS,YAAY,KAAK,IAAI,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAO7G,kBAAc,UAAU,OAAO,QAAQ;AAGvC,aAAS,eAAe,oBAAoB,GAAG,iBAAiB,SAAS,MAAM;AAC7E,oBAAc,UAAU,IAAI,QAAQ;AAAA,IACtC,CAAC;AAED,aAAS,eAAe,mBAAmB,GAAG,iBAAiB,SAAS,YAAY;AAClF,YAAM,KAAK,aAAa,iBAAiB;AAAA,IAC3C,CAAC;AAAA,EACH;AAAA,EAEA,MAAc,aAAa,aAAoC;AAC7D,UAAM,UAAU,KAAK;AAErB,UAAM,cACH,SAAS,eAAe,aAAa,GAAwB,WAAW;AAE3E,UAAM,WAAuC;AAAA,MAC3C,gBAAiB,SAAS,eAAe,iBAAiB,GAAwB,WAAW;AAAA,MAC7F,gBAAgB,SAAU,SAAS,eAAe,aAAa,GAAwB,SAAS,IAAI;AAAA,MACpG,WAAW,SAAU,SAAS,eAAe,YAAY,GAAwB,SAAS,IAAI;AAAA,MAC9F,cAAc,SAAU,SAAS,eAAe,eAAe,GAAwB,SAAS,IAAI;AAAA,MACpG,OAAO,SAAU,SAAS,eAAe,aAAa,GAAwB,SAAS,KAAK;AAAA,MAC5F,MAAO,SAAS,eAAe,YAAY,GAAyB;AAAA,MACpE;AAAA;AAAA,MAEA,WAAW,cAAe,SAAS,SAAS,aAAa,QAAS;AAAA,MAClE,iBAAkB,SAAS,eAAe,mBAAmB,GAAyB;AAAA,MACtF,aAAc,SAAS,eAAe,cAAc,GAA2B,MAC5E,MAAM,IAAI,EACV,IAAI,SAAO,IAAI,KAAK,CAAC,EACrB,OAAO,SAAO,QAAQ,EAAE;AAAA,MAC3B,YAAa,SAAS,eAAe,WAAW,GAAyB,SAAS;AAAA,IACpF;AAEA,QAAI,SAAS,SAAS,WAAY,UAAS,cAAc;AAEzD,UAAM,eAAe,wBAAwB,aAAa,QAAQ;AAClE,UAAM,KAAK,kBAAkB;AAG7B,SAAK,YAAY;AAEjB,UAAM,gBAAgB,SAAS,eAAe,gBAAgB;AAC9D,QAAI,eAAe;AACjB,oBAAc,UAAU,IAAI,QAAQ;AAAA,IACtC;AAAA,EACF;AAAA,EAEQ,uBAA6B;AACnC,QAAI,CAAC,KAAK,iBAAkB;AAE5B,UAAM,YAAY,SAAS,eAAe,WAAW;AACrD,QAAI,CAAC,UAAW;AAEhB,UAAM,WAAW,KAAK,iBAAiB;AACvC,UAAM,OAAO,SAAS;AAGtB,SAAK,MAAM,YAAY,iBAAiB,GAAG,SAAS,KAAK,IAAI;AAC7D,SAAK,MAAM,YAAY,iBAAiB,GAAG,SAAS,cAAc,IAAI;AACtE,SAAK,MAAM,YAAY,gBAAgB,GAAG,SAAS,SAAS,IAAI;AAChE,SAAK,MAAM,YAAY,mBAAmB,GAAG,SAAS,YAAY,IAAI;AAGtE,cAAU,UAAU,OAAO,cAAc,SAAS,SAAS,OAAO;AAClE,cAAU,UAAU,OAAO,iBAAiB,SAAS,SAAS,UAAU;AACxE,cAAU,UAAU,OAAO,mBAAmB,SAAS,cAAc;AACrE,cAAU,UAAU,OAAO,aAAa,SAAS,SAAS;AAC1D,cAAU,UAAU,OAAO,eAAe,SAAS,WAAW;AAAA,EAChE;AAEF;AAGA,SAAS,iBAAiB,oBAAoB,MAAM;AAClD,MAAI,iBAAiB;AACvB,CAAC;",
  "names": []
}
